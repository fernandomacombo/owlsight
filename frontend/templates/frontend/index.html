{% load static %}
<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Owlsight ‚Äî Biblioteca inteligente. Descubra, leia e organize livros com recomenda√ß√µes personalizadas." />
  <meta name="theme-color" content="#070707" />

  <link rel="icon" type="image/x-icon" href="{% static 'frontend/images/favicon.ico' %}">
  <link rel="apple-touch-icon" href="{% static 'frontend/images/favicon.ico' %}">
  <script src="https://cdn.tailwindcss.com"></script>

  <title>Owlsight ‚Äî Biblioteca</title>

  <style>
    :root{
      --bg:#070707;
      --panel: rgba(18,18,18,.78);
      --panel2: rgba(12,12,12,.92);
      --stroke: rgba(255,255,255,.10);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.62);
      --muted2: rgba(255,255,255,.45);
      --red:#E10600;
      --red2:#8A0000;
      --green:#22c55e;
    }

    html,body{ height:100%; background: var(--bg); color: var(--text); }
    body{ overflow-x:hidden; }
    html { scroll-behavior: smooth; }

    .cinema-bg{
      background:
        radial-gradient(1100px 560px at 15% 0%, rgba(225,6,0,.18), transparent 60%),
        radial-gradient(980px 520px at 85% 10%, rgba(138,0,0,.14), transparent 55%),
        radial-gradient(760px 420px at 50% 85%, rgba(255,255,255,.06), transparent 65%),
        linear-gradient(180deg, rgba(0,0,0,.0), rgba(0,0,0,.35)),
        var(--bg);
    }

    .grain:before{
      content:"";
      position:fixed; inset:-20%;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.75' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
      opacity:.07;
      pointer-events:none;
      transform:translateZ(0);
      animation: grainMove 10s linear infinite;
    }
    @keyframes grainMove{
      0%{ transform: translate(0,0); }
      25%{ transform: translate(-2%, 1%); }
      50%{ transform: translate(-1%, -2%); }
      75%{ transform: translate(2%, 1%); }
      100%{ transform: translate(0,0); }
    }

    .glass{
      background: rgba(255,255,255,.05);
      border: 1px solid var(--stroke);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
    }
    .glow{
      box-shadow:
        0 0 0 1px rgba(255,255,255,.06),
        0 18px 60px rgba(0,0,0,.55),
        0 0 80px rgba(225,6,0,.10);
    }

    .pill{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
    }

    .u{ position:relative; }
    .u:after{
      content:"";
      position:absolute; left:0; bottom:-6px;
      width:0; height:2px;
      background: linear-gradient(90deg, var(--red), rgba(225,6,0,0));
      transition: width .25s ease;
    }
    .u:hover:after{ width:100%; }

    .shimmer{ position:relative; overflow:hidden; }
    .shimmer:after{
      content:"";
      position:absolute; inset:-120% -60%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.18), transparent);
      transform: rotate(12deg);
      animation: shimmer 2.8s ease-in-out infinite;
      opacity:.45;
    }
    @keyframes shimmer{
      0%{ transform: translateX(-30%) rotate(12deg); }
      100%{ transform: translateX(30%) rotate(12deg); }
    }

    @keyframes floaty{
      0%,100%{ transform: translateY(0px); }
      50%{ transform: translateY(-10px); }
    }
    .floaty{ animation: floaty 4.5s ease-in-out infinite; }

    @media (prefers-reduced-motion: reduce){
      *{ animation:none !important; transition:none !important; scroll-behavior:auto !important; }
    }
  </style>
</head>

<body id="top" class="cinema-bg grain">
  <!-- TOP NAV -->
  <header class="fixed top-0 left-0 right-0 z-50">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 pt-4">
      <div class="glass glow rounded-2xl px-4 sm:px-5 py-3 flex items-center justify-between">
        <!-- Logo -->
        <a href="{% url 'frontend:home' %}" class="flex items-center gap-3">
          <div class="w-10 h-10 rounded-xl glass grid place-items-center">
            <img src="{% static 'frontend/images/logo.png' %}" alt="Owlsight" class="w-7 h-7 object-contain"
                 onerror="this.style.display='none'; this.parentElement.innerHTML='<span style=&quot;color:rgba(255,255,255,.9);font-weight:900;&quot;>O</span>';">
          </div>
          <div class="leading-tight">
            <div class="text-white font-black tracking-tight">Owlsight</div>
            <div class="text-xs" style="color:var(--muted2)">See beyond ‚Ä¢ biblioteca inteligente</div>
          </div>
        </a>

        <!-- Desktop menu -->
        <nav class="hidden md:flex items-center gap-6 text-sm">
          <a class="u" href="#catalogo">Cat√°logo</a>
          <a class="u" href="#mais-lidos">Mais lidos</a>
          <a class="u" href="#mais-recentes">Mais recentes</a>
          <a class="u" href="#filtro">Filtro avan√ßado</a>

          {% if user.is_authenticated %}
            <a class="u" href="{% url 'frontend:favorites' %}">Favoritos</a>
            <a class="u" href="{% url 'frontend:account' %}">Minha conta</a>
            {% if user.is_staff or user.is_superuser %}
              <a class="u" href="/admin/">Admin</a>
            {% endif %}
            <form method="post" action="{% url 'frontend:logout' %}" class="inline">
              {% csrf_token %}
              <button class="px-3 py-2 rounded-xl pill hover:bg-white/10 transition">Sair</button>
            </form>
          {% else %}
            <a class="u" href="{% url 'frontend:categories' %}">Categorias</a>
            <a class="u" href="{% url 'frontend:login' %}">Login</a>
            <a href="{% url 'frontend:register' %}"
               class="px-3 py-2 rounded-xl text-sm font-semibold"
               style="background:linear-gradient(135deg,var(--red),var(--red2));">
              Criar conta
            </a>
          {% endif %}
        </nav>

        <!-- Mobile menu button -->
        <button id="menuBtn" class="md:hidden px-3 py-2 rounded-xl pill hover:bg-white/10 transition">
          <span class="sr-only">Abrir menu</span>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
            <path fill-rule="evenodd" d="M3 6.75A.75.75 0 013.75 6h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 6.75zm0 5.25A.75.75 0 013.75 11.25h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 12zm0 5.25A.75.75 0 013.75 16.5h16.5a.75.75 0 010 1.5H3.75A.75.75 0 013 17.25z" clip-rule="evenodd"/>
          </svg>
        </button>
      </div>

      <!-- Mobile dropdown -->
      <div id="mobileMenu" class="hidden mt-3 glass glow rounded-2xl p-4 md:hidden">
        <div class="grid gap-2 text-sm">
          <a href="#catalogo" class="px-3 py-2 rounded-xl pill hover:bg-white/10 transition">Cat√°logo</a>
          <a href="#mais-lidos" class="px-3 py-2 rounded-xl pill hover:bg-white/10 transition">Mais lidos</a>
          <a href="#mais-recentes" class="px-3 py-2 rounded-xl pill hover:bg-white/10 transition">Mais recentes</a>
          <a href="#filtro" class="px-3 py-2 rounded-xl pill hover:bg-white/10 transition">Filtro avan√ßado</a>

          {% if user.is_authenticated %}
            <a href="{% url 'frontend:favorites' %}" class="px-3 py-2 rounded-xl pill hover:bg-white/10 transition">Favoritos</a>
            <a href="{% url 'frontend:account' %}" class="px-3 py-2 rounded-xl pill hover:bg-white/10 transition">Minha conta</a>
            {% if user.is_staff or user.is_superuser %}
              <a href="/admin/" class="px-3 py-2 rounded-xl pill hover:bg-white/10 transition">Admin</a>
            {% endif %}
            <form method="post" action="{% url 'frontend:logout' %}">
              {% csrf_token %}
              <button class="w-full text-left px-3 py-2 rounded-xl pill hover:bg-white/10 transition">Sair</button>
            </form>
          {% else %}
            <a href="{% url 'frontend:categories' %}" class="px-3 py-2 rounded-xl pill hover:bg-white/10 transition">Categorias</a>
            <a href="{% url 'frontend:login' %}" class="px-3 py-2 rounded-xl pill hover:bg-white/10 transition">Login</a>
            <a href="{% url 'frontend:register' %}"
               class="px-3 py-2 rounded-xl text-sm font-semibold text-center"
               style="background:linear-gradient(135deg,var(--red),var(--red2));">
              Criar conta
            </a>
          {% endif %}
        </div>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <main class="pt-28">
    <section class="min-h-[calc(100vh-7rem)] flex items-center">
      <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 w-full">

        {% if messages %}
          <div class="mb-6 grid gap-2">
            {% for message in messages %}
              <div class="glass rounded-2xl px-4 py-3 border border-white/10">
                <div class="text-sm">
                  <span class="font-semibold">{{ message.tags|default:"info"|upper }}</span>
                  <span class="text-white/80"> ‚Äî {{ message }}</span>
                </div>
              </div>
            {% endfor %}
          </div>
        {% endif %}

        <div class="grid lg:grid-cols-2 gap-7 items-center">
          <!-- LEFT -->
          <div class="glass glow rounded-3xl p-6 sm:p-8">
            <div class="flex flex-wrap items-center gap-2 text-xs">
              <span class="px-3 py-1 rounded-full pill">üìö Biblioteca</span>
              <span class="px-3 py-1 rounded-full pill">üîé Busca</span>
              <span class="px-3 py-1 rounded-full pill">üîí Seguran√ßa</span>
            </div>

            <h1 class="mt-5 text-3xl sm:text-4xl lg:text-5xl font-black tracking-tight">
              Encontra o pr√≥ximo livro
              <span style="color:var(--red)">em segundos</span>.
            </h1>

            <p class="mt-4 text-white/70 text-base sm:text-lg">
              Explore o cat√°logo. Para ler e favoritar, fa√ßa login.
            </p>

            {% if featured %}
              <div class="mt-6 grid sm:grid-cols-3 gap-3">
                <div class="rounded-2xl glass p-4">
                  <div class="text-xs" style="color:var(--muted2)">Tipo</div>
                  <div class="mt-1 text-lg font-extrabold">
                    {% if featured.book_type == "premium" %}üíé Premium{% else %}üéÅ Free{% endif %}
                  </div>
                </div>
                <div class="rounded-2xl glass p-4">
                  <div class="text-xs" style="color:var(--muted2)">G√™nero</div>
                  <div class="mt-1 text-lg font-extrabold">üè∑Ô∏è {{ featured.genre|default:"‚Äî" }}</div>
                </div>
                <div class="rounded-2xl glass p-4">
                  <div class="text-xs" style="color:var(--muted2)">P√°ginas</div>
                  <div class="mt-1 text-lg font-extrabold">üìñ {{ featured.total_pages|default:"‚Äî" }}</div>
                </div>
              </div>
            {% endif %}

            <div class="mt-6 flex flex-col sm:flex-row gap-3">
              <a href="#catalogo"
                 class="px-5 py-3 rounded-2xl font-bold text-center"
                 style="background:linear-gradient(135deg,var(--red),var(--red2));">
                Ver o cat√°logo
              </a>

              {% if featured %}
                <a href="{% url 'frontend:read' featured.id 1 %}"
                   class="px-5 py-3 rounded-2xl font-semibold text-center pill hover:bg-white/10 transition">
                  Ler agora
                </a>
              {% else %}
                <a href="{% url 'frontend:login' %}"
                   class="px-5 py-3 rounded-2xl font-semibold text-center pill hover:bg-white/10 transition">
                  Ler agora
                </a>
              {% endif %}
            </div>

            <div class="mt-4 text-xs text-white/45">
              {% if db_books_count %}
                Livros no banco: {{ db_books_count }}
              {% else %}
                Ainda n√£o h√° livros no banco. Adicione no Admin.
              {% endif %}
            </div>
          </div>

          <!-- RIGHT -->
          <div class="glass glow rounded-3xl p-6 sm:p-8 overflow-hidden relative">
            <div class="absolute -top-28 -right-28 w-72 h-72 rounded-full"
                 style="background:radial-gradient(circle at 30% 30%, rgba(225,6,0,.35), transparent 60%); filter: blur(2px);"></div>

            <div class="flex items-start justify-between gap-4">
              <div>
                <div class="text-xs" style="color:var(--muted2)">Livro em destaque</div>
                <div class="text-2xl font-black mt-1">
                  {% if featured %}{{ featured.title }}{% else %}Sem livros{% endif %}
                </div>
                <div class="text-sm text-white/60 mt-1">
                  {% if featured %}{{ featured.author|default:"" }}{% endif %}
                </div>
              </div>

              <a href="#mais-lidos" class="px-3 py-2 rounded-xl pill hover:bg-white/10 transition text-sm">
                Ver tend√™ncias ‚Üí
              </a>
            </div>

            <!-- ‚úÖ FIX HERO GRID (n√£o bagun√ßa no mobile) -->
            <div class="mt-6 grid grid-cols-1 sm:grid-cols-12 gap-4 items-start">
              <div class="sm:col-span-5">
                <div class="rounded-2xl overflow-hidden border border-white/10 shimmer floaty">
                  {% if featured and featured.cover %}
                    <img src="{{ featured.cover.url }}" alt="{{ featured.title }}" class="w-full h-[300px] sm:h-[340px] object-cover" />
                  {% else %}
                    <div class="w-full h-[300px] sm:h-[340px] bg-white/5 grid place-items-center">
                      <div class="text-center">
                        <div class="text-5xl">üìï</div>
                        <div class="text-xs text-white/50 mt-2">Capa indispon√≠vel</div>
                      </div>
                    </div>
                  {% endif %}
                </div>
              </div>

              <div class="sm:col-span-7">
                <div class="rounded-2xl glass p-4">
                  <div class="text-xs" style="color:var(--muted2)">Descri√ß√£o</div>
                  {% if featured %}
                    <p class="mt-2 text-sm text-white/70 leading-relaxed">
                      {{ featured.description|default:"‚Äî"|truncatechars:220 }}
                    </p>

                    {% if featured.tags.all %}
                      <div class="mt-4 flex flex-wrap gap-2">
                        {% for t in featured.tags.all %}
                          <span class="px-3 py-1 rounded-full pill text-xs">#{{ t.name }}</span>
                        {% endfor %}
                      </div>
                    {% endif %}

                    <div class="mt-4">
                      <a href="{% url 'frontend:read' featured.id 1 %}"
                         class="inline-flex w-full justify-center px-4 py-3 rounded-2xl font-bold"
                         style="background:linear-gradient(135deg,var(--red),var(--red2));">
                        Ler este livro
                      </a>
                    </div>
                  {% else %}
                    <p class="mt-2 text-sm text-white/60">Adicione livros no Admin para aparecerem aqui.</p>
                  {% endif %}
                </div>

                <div class="mt-4 text-xs text-white/45">
                  Seguran√ßa: valida√ß√µes no servidor e controle de acesso por sess√£o.
                </div>
              </div>
            </div>

            <div class="mt-6 flex justify-center">
              <a href="#catalogo" class="text-xs text-white/60 hover:text-white transition inline-flex items-center gap-2">
                Explorar abaixo <span class="inline-block animate-bounce">‚Üì</span>
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- DISCOVERY -->
    <section id="catalogo" class="py-10">
      <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <div class="flex items-end justify-between gap-4">
          <div>
            <h2 class="text-2xl sm:text-3xl font-black">Descoberta r√°pida</h2>
            <p class="text-white/60 mt-1 text-sm">
              Explore livros reais do banco. Use o filtro para refinar.
            </p>
          </div>
          <div class="hidden sm:flex gap-2">
            <a href="#filtro" class="px-4 py-2 rounded-xl pill hover:bg-white/10 transition text-sm">Ir ao filtro</a>
            <a href="#todos" class="px-4 py-2 rounded-xl pill hover:bg-white/10 transition text-sm">Ver resultados</a>
          </div>
        </div>

        <div class="mt-5 flex flex-wrap gap-2">
          <button class="px-3 py-2 rounded-xl pill text-sm hover:bg-white/10 transition" data-chip="new">üÜï Recentes</button>
          <button class="px-3 py-2 rounded-xl pill text-sm hover:bg-white/10 transition" data-chip="free">üéÅ Free</button>
          <button class="px-3 py-2 rounded-xl pill text-sm hover:bg-white/10 transition" data-chip="premium">üíé Premium</button>
        </div>
      </div>
    </section>

    <!-- MOST READ (REAL) -->
    <section id="mais-lidos" class="py-8">
      <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between">
          <h3 class="text-xl sm:text-2xl font-black">Mais lidos</h3>
          <a href="#todos" class="text-sm text-white/60 hover:text-white transition">Ver resultados ‚Üí</a>
        </div>

        <div class="mt-4 grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
          {% for b in most_read %}
            <article class="glass glow rounded-2xl p-4 hover:bg-white/7 transition">
              <div class="rounded-xl overflow-hidden border border-white/10">
                {% if b.cover %}
                  <img src="{{ b.cover.url }}" alt="{{ b.title }}" class="h-40 w-full object-cover" />
                {% else %}
                  <div class="h-40 bg-white/5 grid place-items-center">üìò</div>
                {% endif %}
              </div>

              <div class="mt-3">
                <div class="font-bold">{{ b.title }}</div>
                <div class="text-xs text-white/60">
                  {{ b.author|default:"" }}{% if b.genre %} ‚Ä¢ {{ b.genre }}{% endif %}
                </div>

                <div class="mt-3 flex gap-2">
                  <a href="{% url 'frontend:read' b.id 1 %}" class="flex-1 text-center px-3 py-2 rounded-xl pill hover:bg-white/10 transition text-sm">Ler</a>
                  <a href="{% url 'frontend:favorites' %}" class="px-3 py-2 rounded-xl pill hover:bg-white/10 transition text-sm">‚ô°</a>
                </div>
              </div>
            </article>
          {% empty %}
            <div class="col-span-full glass glow rounded-2xl p-5 text-sm text-white/60">
              Ainda n√£o h√° livros no banco.
            </div>
          {% endfor %}
        </div>
      </div>
    </section>

    <!-- MOST RECENT (REAL) -->
    <section id="mais-recentes" class="py-8">
      <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between">
          <h3 class="text-xl sm:text-2xl font-black">Mais recentes</h3>
          <a href="#todos" class="text-sm text-white/60 hover:text-white transition">Ver resultados ‚Üí</a>
        </div>

        <div class="mt-4 grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
          {% for b in most_recent %}
            <article class="glass glow rounded-2xl p-4 hover:bg-white/7 transition">
              <div class="rounded-xl overflow-hidden border border-white/10">
                {% if b.cover %}
                  <img src="{{ b.cover.url }}" alt="{{ b.title }}" class="h-40 w-full object-cover" />
                {% else %}
                  <div class="h-40 bg-white/5 grid place-items-center">üÜï</div>
                {% endif %}
              </div>

              <div class="mt-3">
                <div class="font-bold">{{ b.title }}</div>
                <div class="text-xs text-white/60">
                  {{ b.author|default:"" }}{% if b.genre %} ‚Ä¢ {{ b.genre }}{% endif %}
                </div>

                <div class="mt-3 flex gap-2">
                  <a href="{% url 'frontend:read' b.id 1 %}" class="flex-1 text-center px-3 py-2 rounded-xl pill hover:bg-white/10 transition text-sm">Ler</a>
                  <a href="{% url 'frontend:favorites' %}" class="px-3 py-2 rounded-xl pill hover:bg-white/10 transition text-sm">‚ô°</a>
                </div>
              </div>
            </article>
          {% empty %}
            <div class="col-span-full glass glow rounded-2xl p-5 text-sm text-white/60">
              Ainda n√£o h√° livros recentes.
            </div>
          {% endfor %}
        </div>
      </div>
    </section>

    <!-- FILTER (REAL) -->
    <section id="filtro" class="py-10">
      <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between gap-4">
          <div>
            <h3 class="text-xl sm:text-2xl font-black">Filtro</h3>
            <p class="text-white/60 text-sm mt-1">Pesquisar por t√≠tulo, autor, g√©nero e ordenar.</p>
          </div>
          <a href="#todos" class="text-sm text-white/60 hover:text-white transition">Aplicar e ver resultados ‚Üì</a>
        </div>

        <form method="get" action="#todos" class="mt-5 grid lg:grid-cols-12 gap-4">
          <div class="lg:col-span-5 glass glow rounded-2xl p-4">
            <label class="text-xs text-white/60">Pesquisar</label>
            <input name="q" value="{{ request.GET.q|default:'' }}"
                   placeholder="T√≠tulo, autor, g√©nero..."
                   class="mt-2 w-full px-4 py-3 rounded-xl bg-black/40 border border-white/10 outline-none focus:border-white/25" />
          </div>

          <div class="lg:col-span-3 glass glow rounded-2xl p-4">
            <label class="text-xs text-white/60">Tipo</label>
            <select name="type" class="mt-2 w-full px-4 py-3 rounded-xl bg-black/40 border border-white/10 outline-none focus:border-white/25">
              <option value="">Todos</option>
              <option value="free" {% if request.GET.type == "free" %}selected{% endif %}>Free</option>
              <option value="premium" {% if request.GET.type == "premium" %}selected{% endif %}>Premium</option>
            </select>
          </div>

          <div class="lg:col-span-4 glass glow rounded-2xl p-4">
            <label class="text-xs text-white/60">Ordenar por</label>
            <select name="sort" class="mt-2 w-full px-4 py-3 rounded-xl bg-black/40 border border-white/10 outline-none focus:border-white/25">
              <option value="recentes" {% if request.GET.sort == "recentes" %}selected{% endif %}>Mais recentes</option>
              <option value="antigos" {% if request.GET.sort == "antigos" %}selected{% endif %}>Mais antigos</option>
              <option value="titulo" {% if request.GET.sort == "titulo" %}selected{% endif %}>T√≠tulo</option>
            </select>

            <div class="mt-3 flex gap-2">
              <button type="submit"
                      class="flex-1 px-4 py-3 rounded-2xl font-bold"
                      style="background:linear-gradient(135deg,var(--red),var(--red2));">
                Filtrar
              </button>
              <a href="{% url 'frontend:home' %}#todos"
                 class="px-4 py-3 rounded-2xl pill hover:bg-white/10 transition text-center font-semibold">
                Limpar
              </a>
            </div>
          </div>
        </form>
      </div>
    </section>

    <!-- ALL BOOKS (REAL) -->
    <section id="todos" class="py-10">
      <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <div class="flex items-end justify-between gap-4">
          <div>
            <h3 class="text-xl sm:text-2xl font-black">Todos os livros</h3>
            <p class="text-white/60 text-sm mt-1">Resultados reais do banco.</p>
          </div>
        </div>

        <div class="mt-5 grid sm:grid-cols-2 lg:grid-cols-5 gap-4">
          {% for b in books %}
            <article class="glass glow rounded-2xl p-4 hover:bg-white/7 transition">
              <div class="rounded-xl overflow-hidden border border-white/10">
                {% if b.cover %}
                  <img src="{{ b.cover.url }}" alt="{{ b.title }}" class="h-36 w-full object-cover" />
                {% else %}
                  <div class="h-36 bg-white/5 grid place-items-center">üìó</div>
                {% endif %}
              </div>

              <div class="mt-3">
                <div class="font-bold text-sm">{{ b.title }}</div>
                <div class="text-xs text-white/60">
                  {{ b.author|default:"" }}{% if b.genre %} ‚Ä¢ {{ b.genre }}{% endif %}
                </div>

                <div class="mt-3 flex gap-2">
                  <a href="{% url 'frontend:read' b.id 1 %}"
                     class="flex-1 text-center px-3 py-2 rounded-xl pill hover:bg-white/10 transition text-sm">
                    Ler
                  </a>
                  <a href="{% url 'frontend:favorites' %}"
                     class="px-3 py-2 rounded-xl pill hover:bg-white/10 transition text-sm">
                    ‚ô°
                  </a>
                </div>
              </div>
            </article>
          {% empty %}
            <div class="col-span-full glass glow rounded-2xl p-5 text-sm text-white/60">
              Nenhum livro encontrado.
            </div>
          {% endfor %}
        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="py-10">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="glass glow rounded-2xl p-5 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
        <div class="text-sm text-white/70">
          <div class="font-semibold">Owlsight v1.0 ‚Äî Todos direitos reservados</div>
          <div class="text-xs text-white/45 mt-1">
            Ao usar a plataforma, voc√™ concorda com os termos e condi√ß√µes aplic√°veis.
          </div>
        </div>
        <div class="flex flex-wrap gap-2">
          <a href="{% url 'frontend:terms' %}" class="px-3 py-2 rounded-xl pill hover:bg-white/10 transition text-sm">Termos</a>
          <a href="{% url 'frontend:privacy' %}" class="px-3 py-2 rounded-xl pill hover:bg-white/10 transition text-sm">Privacidade</a>
          <a href="#top" class="px-3 py-2 rounded-xl pill hover:bg-white/10 transition text-sm">Topo ‚Üë</a>
        </div>
      </div>
    </div>
  </footer>

  <script>
    const menuBtn = document.getElementById("menuBtn");
    const mobileMenu = document.getElementById("mobileMenu");

    if(menuBtn && mobileMenu){
      menuBtn.addEventListener("click", () => {
        mobileMenu.classList.toggle("hidden");
      });
    }

    // chips -> aplica filtros reais
    document.querySelectorAll("[data-chip]").forEach(btn => {
      btn.addEventListener("click", () => {
        const chip = btn.getAttribute("data-chip");
        const url = new URL(window.location.href);
        url.hash = "todos";

        // limpa antes
        url.searchParams.delete("type");
        url.searchParams.delete("sort");

        if(chip === "new") url.searchParams.set("sort", "recentes");
        if(chip === "free") url.searchParams.set("type", "free");
        if(chip === "premium") url.searchParams.set("type", "premium");

        window.location.href = url.toString();
      });
    });
  </script>
</body>
</html>